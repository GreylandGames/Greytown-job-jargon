{% comment %}lessons/templates/lessons/combined_htmx_response.html{% endcomment %}
<div hx-swap-oob="true" id="chat-content">
    {% if error %}
        <div class="assistant-message">
            {{ error }}
        </div>
    {% else %}
        <div class="assistant-message">
            {{ assistant_message }}
        </div>
        {% if suggestions %}
            <div class="suggestions">
                <strong>Suggested responses:</strong><br>
                {% for suggestion in suggestions %}
                    <span class="suggestion" hx-on="click: document.getElementById('user-message-input').value = '{{ suggestion.text|escapejs }}'; document.getElementById('user-message-input').focus();">{{ suggestion.text }}</span><br>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}
</div>
<div hx-swap-oob="true" id="key-concepts-container">
    {% include "lessons/key_concepts_grid.html" with page=page addressed_key_concepts=addressed_key_concepts %}
</div>